<aside class="sidebar" [class.sidebar-collapsed]="isCollapsed()" role="navigation" aria-label="Main navigation sidebar">
  <!-- Collapse Toggle (Mobile Only) -->
  <button class="collapse-toggle mobile-only" (click)="toggleCollapse()" title="Toggle sidebar">
    <i class="icon-collapse" [class.rotated]="isCollapsed()"></i>
  </button>

  <!-- Sidebar Content -->
  <div class="sidebar-content">
    <!-- Navigation Section -->
    <nav class="sidebar-nav" aria-label="Primary navigation">
      <div class="nav-section">
        <h3 class="nav-section-title" id="nav-heading">Navigate</h3>
        <a routerLink="/" class="nav-item" routerLinkActive="nav-item-active" [routerLinkActiveOptions]="{exact: true}" aria-describedby="nav-heading">
          <div class="nav-item-icon" aria-hidden="true">
            <i class="icon-home"></i>
          </div>
          <span class="nav-item-text">Home</span>
        </a>
        <a routerLink="/debaters" class="nav-item" routerLinkActive="nav-item-active" aria-describedby="nav-heading">
          <div class="nav-item-icon" aria-hidden="true">
            <i class="icon-debaters"></i>
          </div>
          <span class="nav-item-text">Debaters</span>
        </a>
      </div>
    </nav>

    <!-- Recent Debates -->
    <section class="recent-section" aria-label="Recent debates">
      <div class="section-header">
        <h3 class="section-title">Recent Debates</h3>
        <button class="refresh-btn" (click)="refreshRecentDebates()" title="Refresh" [class.refreshing]="isRefreshing()" [disabled]="isRefreshing()">
          <i class="icon-refresh" [class.spinning]="isRefreshing()"></i>
        </button>
      </div>
      
      <!-- Search Debates -->
      @if (recentDebates().length > 0) {
        <div class="search-container" role="search" aria-label="Search debates">
          <div class="search-input-wrapper">
            <i class="icon-search" aria-hidden="true"></i>
            <input 
              type="text" 
              [(ngModel)]="searchTerm"
              (input)="filterDebates()"
              placeholder="Search debates... (âŒ˜K)"
              class="search-input"
              title="Search through your recent debates (Ctrl/Cmd + K)"
              accesskey="k"
              aria-label="Search debates"
              aria-describedby="search-help">
            @if (searchTerm) {
              <button class="search-clear" (click)="clearSearch()" title="Clear search" aria-label="Clear search term">
                <i class="icon-close-mini" aria-hidden="true"></i>
              </button>
            }
          </div>
          <div id="search-help" class="sr-only">Use Ctrl+K or Cmd+K to quickly focus the search. Press Escape to clear.</div>
        </div>
      }
      
      @if (filteredDebates().length > 0) {
        <div class="recent-debates">
          @for (debate of filteredDebates(); track debate.id) {
            <div class="debate-item">
              <button class="debate-content-btn" (click)="navigateToDebate(debate.id)">
                <div class="debate-content">
                  <div class="debate-topic">{{ debate.topic }}</div>
                  <div class="debate-meta">
                    <span class="debate-status" [class]="'status-' + debate.status">{{ debate.status }}</span>
                    <span class="debate-participants">{{ debate.participantCount }} debaters</span>
                    <span class="debate-time">{{ debate.timestamp | date:'short' }}</span>
                  </div>
                </div>
                <i class="icon-arrow-right debate-arrow"></i>
              </button>
              <div class="debate-actions">
                <button class="debate-delete-btn" (click)="deleteDebate(debate.id, debate.topic)" title="Delete debate">
                  <i class="icon-delete"></i>
                </button>
              </div>
            </div>
          }
        </div>
      } @else {
        <div class="empty-state">
          @if (searchTerm) {
            <i class="icon-search-empty"></i>
            <p class="empty-text">No debates found</p>
            <p class="empty-hint">Try adjusting your search term</p>
          } @else {
            <i class="icon-debate-empty"></i>
            <p class="empty-text">No recent debates</p>
            <p class="empty-hint">Create a debate to see it here</p>
          }
        </div>
      }
    </section>
  </div>

</aside>

<!-- Sidebar Backdrop (Mobile Only) -->
@if (!isCollapsed()) {
  <div class="sidebar-backdrop mobile-only" (click)="toggleCollapse()"></div>
}